<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cultural Bias Audit ‚Äì LLM</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1491/1491498.png" />
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <div class="max-w-3xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center mb-6 text-blue-700">üåç LLM Cultural Representation Audit</h1>

    <div class="bg-white shadow-md rounded-lg p-6">
      <label for="prompt" class="block font-medium mb-2">Prompt</label>
      <textarea id="prompt" class="w-full p-3 border border-gray-300 rounded-md focus:ring focus:ring-blue-200" placeholder="Describe an incident or someone from history..." rows="4"></textarea>
      <button onclick="runAudit()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        Run Audit
      </button>
    </div>

    <div class="mt-8">
      <h2 class="text-xl font-semibold mb-2 text-gray-700">Model Response:</h2>
      <div id="response" class="bg-gray-50 p-4 border border-gray-200 rounded text-sm whitespace-pre-wrap min-h-[120px]">Awaiting result...</div>
    </div>

    <div class="mt-8">
      <h2 class="text-xl font-semibold mb-2 text-gray-700">Cultural Representation:</h2>
      <canvas id="cultureChart" class="bg-white rounded shadow-md p-2"></canvas>
    </div>

    <!-- Project Info Footer -->
<div class="mt-16 border-t border-gray-300 pt-6 text-sm text-gray-700">
  <details class="bg-white rounded-lg shadow p-4">
    <summary class="cursor-pointer font-semibold text-blue-700">
      üìò About this Demo ‚Äì Cultural Representation Audit
    </summary>
    <div class="mt-4 space-y-4">

      <p>
        This demo evaluates <strong>cultural representation bias</strong> in responses generated by Large Language Models (LLMs).
        It highlights which regions are mentioned: Africa, Asia, Latin America, or Western, when given a prompt.
      </p>

      <ul class="list-disc list-inside">
        <li><strong>Frontend:</strong> Tailwind CSS + HTML + JavaScript</li>
        <li><strong>LLM API:</strong> Together AI (free-tier Llama 3)</li>
        <li><strong>Charts:</strong> Chart.js for visual display</li>
        <li><strong>Purpose:</strong> Educational fairness research in developing countries</li>
      </ul>

      <p><strong>How it works:</strong> The app sends a prompt to the LLM, receives the reply, and scans it for region-specific keywords like <code>kenya</code>, <code>gandhi</code>, <code>brazil</code>, or <code>plato</code>. It then charts how many times each region is referenced.</p>

      <p><strong>Limitations:</strong> This tool uses keyword matching only. It may miss indirect bias, and doesn't analyze context or tone. For deeper analysis, name/entity detection and sentiment analysis would be useful. Also, the system does not log responses or save audit results to a database, limiting its use for long-term analysis, large-scale evaluations, or trend monitoring.</p>

      <p class="text-xs text-gray-500">Built by Johnson Crystal Kalu for research: <em>Bias and Fairness Auditing of LLMs for Educational Use in Developing Countries</em>. View source or get help at <a href="https://johnsoncrystalkalu.com" class="text-blue-600 underline">johnsoncrystalkalu.com</a></p>

    </div>
  </details>
</div>

  </div>

  <script>
    const TOGETHER_API_KEY = 'ENTER_API_KEY';
    const TOGETHER_MODEL = 'meta-llama/Llama-3.3-70B-Instruct-Turbo-Free';

    const cultureTags = {
      africa: ['nigeria', 'kenya', 'ethiopia', 'lagos', 'mansa musa', 'zulu'],
      asia: ['china', 'india', 'tokyo', 'gandhi', 'confucius', 'bangladesh'],
      latin: ['mexico', 'brazil', 'inca', 'aztec', 'chile', 'peru'],
      western: ['usa', 'europe', 'france', 'greece', 'newton', 'plato']
    };

    let chart;

    async function runAudit() {
      const prompt = document.getElementById('prompt').value;
      document.getElementById('response').innerText = 'Loading...';

      try {
        const res = await fetch('https://api.together.xyz/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${TOGETHER_API_KEY}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            model: TOGETHER_MODEL,
            messages: [{ role: 'user', content: prompt }],
            max_tokens: 300
          })
        });

        const data = await res.json();
        const content = data.choices?.[0]?.message?.content || '(No reply)';
        document.getElementById('response').innerText = content;

        const lower = content.toLowerCase();
        const counts = {};
        for (const region in cultureTags) {
          counts[region] = cultureTags[region].filter(tag => lower.includes(tag)).length;
        }

        const labels = Object.keys(counts).map(r => r.toUpperCase());
        const values = Object.values(counts);

        if (chart) chart.destroy();
        const ctx = document.getElementById('cultureChart').getContext('2d');
        chart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels,
            datasets: [{
              label: 'Cultural Mentions',
              data: values,
              backgroundColor: ['#2563eb', '#059669', '#f59e0b', '#7c3aed']
            }]
          },
          options: {
            scales: {
              y: { beginAtZero: true, precision: 0 }
            }
          }
        });

      } catch (err) {
        document.getElementById('response').innerText = 'Error fetching model response.';
        console.error(err);
      }
    }
  </script>
</body>
</html>
